import prisma from "./prisma";
import bcrypt from "bcrypt";

async function main() {
  console.log("🌱 시딩 시작...");

  // 비밀번호 해시화
  const hashedPassword = await bcrypt.hash("User@1234", 10);

  // 1. 유저 5명 생성
  console.log("👥 유저 생성 중...");
  await prisma.user.createMany({
    data: [
      {
        email: "user1@email.com",
        password: hashedPassword,
        name: "김사용자",
        phoneNumber: "010-1234-5678",
      },
      {
        email: "user2@email.com",
        password: hashedPassword,
        name: "이구매자",
        phoneNumber: "010-2345-6789",
      },
      {
        email: "user3@email.com",
        password: hashedPassword,
        name: "박고객",
        phoneNumber: "010-3456-7890",
      },
      {
        email: "user4@email.com",
        password: hashedPassword,
        name: "최멤버",
        phoneNumber: "010-4567-8901",
      },
      {
        email: "user5@email.com",
        password: hashedPassword,
        name: "정회원",
        phoneNumber: "010-5678-9012",
      },
    ],
  });

  // 2. 카테고리 생성
  console.log("📂 카테고리 생성 중...");
  await prisma.category.createMany({
    data: [
      {
        name: "뷰티",
        slug: "beauty",
        description: "화장품, 스킨케어, 메이크업 제품",
        isActive: true,
      },
      {
        name: "푸드",
        slug: "food",
        description: "건강식품, 영양제, 간식",
        isActive: true,
      },
      {
        name: "리빙",
        slug: "living",
        description: "생활용품, 홈케어 제품",
        isActive: true,
      },
      {
        name: "펫",
        slug: "pet",
        description: "반려동물 용품",
        isActive: true,
      },
    ],
  });

  // 브랜드 데이터 추가
  console.log("🏷️ 브랜드 생성 중...");
  await prisma.brand.createMany({
    data: [
      // 뷰티 브랜드
      { name: "에버블룸" },
      { name: "블루허브" },
      { name: "루나화이트" },
      { name: "네이처소울" },
      { name: "그린필드" },
      { name: "퓨어딥" },
      { name: "아쿠아하이드" },
      { name: "로지스킨" },
      { name: "피토베라" },
      { name: "오가닉테라" },

      // 푸드 브랜드
      { name: "헬시밀" },
      { name: "네이처푸드" },
      { name: "바이탈웰" },
      { name: "오가닉키친" },
      { name: "퓨어라이프" },

      // 리빙 브랜드
      { name: "홈스위트" },
      { name: "리빙프로" },
      { name: "데일리라이프" },

      // 펫 브랜드
      { name: "펫프렌즈" },
      { name: "해피펫" },
      { name: "펫케어" },
    ],
  });

  // 카테고리 및 브랜드 ID 가져오기
  const categories = await prisma.category.findMany({
    select: { id: true, slug: true }
  });
  const categoryMap = new Map(categories.map(cat => [cat.slug, cat.id]));
  
  const brands = await prisma.brand.findMany({
    select: { id: true, name: true }
  });
  const brandMap = new Map(brands.map(brand => [brand.name, brand.id]));
  
  // 상품 데이터: 폴더 내 이미지 파일명과 코드 규칙에 맞춰 생성
  console.log("📦 상품 생성 중...");

  type SeedInput = {
    name: string;
    folder: "B_no_bg" | "F_no_bg" | "L_no_bg" | "P_no_bg";
    file: string;
    codePrefix:
      | "BS" // Beauty Skincare
      | "BM" // Beauty Makeup
      | "BH" // Beauty Hair/Body
      | "BT" // Beauty Tools
      | "FM" // Food Meal
      | "FH" // Food Healthcare
      | "FC" // Food Care
      | "FD" // Food Dessert
      | "LK" // Living Kitchen
      | "LD" // Living Daily
      | "PD" // Pet Dog
      | "PC" // Pet Cat
      | "PT"; // Pet Toy
    brandName: string;
    categorySlug: "beauty" | "food" | "living" | "pet";
    price: number;
    isSample: boolean;
    samplePrice: number | null;
    isPick?: boolean;
    stockQuantity?: number;
    detailDescription?: string;
  };

  const AZURE_ACCOUNT = process.env.AZURE_STORAGE_ACCOUNT;
  const AZURE_CONTAINER = process.env.AZURE_STORAGE_CONTAINER;
  if (!AZURE_ACCOUNT || !AZURE_CONTAINER) {
    throw new Error(
      "AZURE_STORAGE_ACCOUNT 또는 AZURE_STORAGE_CONTAINER 환경변수가 없습니다."
    );
  }
  const blobBaseUrl = `https://${AZURE_ACCOUNT}.blob.core.windows.net/${AZURE_CONTAINER}`;
  const toBlobUrl = (folder: string, file: string) =>
    `${blobBaseUrl}/${encodeURIComponent(folder)}/${encodeURIComponent(file)}`;

  const products: SeedInput[] = [
    // 🎨 Beauty - Skincare (BS)
    {
      name: "에버블룸 하이드라 수분크림 50ml",
      folder: "B_no_bg",
      file: "크림.png",
      codePrefix: "BS",
      brandName: "에버블룸",
      categorySlug: "beauty",
      price: 28000,
      isSample: false,
      samplePrice: 1000,
      isPick: true,
      detailDescription: "수분 장벽을 강화하는 데일리 크림",
    },
    {
      name: "에버블룸 리치 리페어 크림 50ml",
      folder: "B_no_bg",
      file: "크림1.png",
      codePrefix: "BS",
      brandName: "에버블룸",
      categorySlug: "beauty",
      price: 32000,
      isSample: true,
      samplePrice: 900,
      isPick: false,
      detailDescription: "세라마이드 콤플렉스 고보습 크림",
    },
    {
      name: "에버블룸 세라마이드 크림 50ml",
      folder: "B_no_bg",
      file: "크림3.png",
      codePrefix: "BS",
      brandName: "에버블룸",
      categorySlug: "beauty",
      price: 34000,
      isSample: true,
      samplePrice: 950,
      isPick: true,
      detailDescription: "민감 피부를 위한 저자극 진정 크림",
    },
    {
      name: "블루허브 딥 리커버리 에센스 50ml",
      folder: "B_no_bg",
      file: "에센스.png",
      codePrefix: "BS",
      brandName: "블루허브",
      categorySlug: "beauty",
      price: 30000,
      isSample: true,
      samplePrice: 1000,
      isPick: false,
      detailDescription: "피부 결을 촘촘하게 채워주는 고농축 에센스",
    },
    {
      name: "아쿠아하이드 인텐스 앰플 15ml",
      folder: "B_no_bg",
      file: "앰플1.png",
      codePrefix: "BS",
      brandName: "아쿠아하이드",
      categorySlug: "beauty",
      price: 45000,
      isSample: false,
      samplePrice: 1500,
      isPick: true,
      detailDescription: "빠르게 스며들어 탄력을 더하는 앰플",
    },
    {
      name: "피토베라 모이스처 마스크팩 10매",
      folder: "B_no_bg",
      file: "마스크팩.png",
      codePrefix: "BS",
      brandName: "피토베라",
      categorySlug: "beauty",
      price: 25000,
      isSample: false,
      samplePrice: 900,
      isPick: true,
      detailDescription: "즉각적인 쿨링 보습 마스크",
    },
    {
      name: "피토베라 브라이트닝 마스크팩 10매",
      folder: "B_no_bg",
      file: "마스크팩1.png",
      codePrefix: "BS",
      brandName: "피토베라",
      categorySlug: "beauty",
      price: 27000,
      isSample: true,
      samplePrice: 950,
      isPick: false,
      detailDescription: "광채 케어 비타민 마스크",
    },
    {
      name: "로지스킨 마일드 클렌징 리무버 200ml",
      folder: "B_no_bg",
      file: "리무버.png",
      codePrefix: "BS",
      brandName: "로지스킨",
      categorySlug: "beauty",
      price: 14000,
      isSample: true,
      samplePrice: 400,
      isPick: false,
      detailDescription: "워터프루프 메이크업까지 순하게 제거",
    },
    {
      name: "블루허브 스킨케어 스타터 세트",
      folder: "B_no_bg",
      file: "스킨케어세트.png",
      codePrefix: "BS",
      brandName: "블루허브",
      categorySlug: "beauty",
      price: 39000,
      isSample: false,
      samplePrice: 1200,
      isPick: true,
      detailDescription: "클렌저/토너/크림 3종",
    },
    {
      name: "블루허브 스킨케어 어드밴스드 세트",
      folder: "B_no_bg",
      file: "스킨케어세트2.png",
      codePrefix: "BS",
      brandName: "블루허브",
      categorySlug: "beauty",
      price: 52000,
      isSample: false,
      samplePrice: 1500,
      isPick: false,
      detailDescription: "앰플/에센스/크림 3종",
    },

    // 🎨 Beauty - Makeup (BM)
    {
      name: "루나화이트 벨벳 틴트 클래식 레드",
      folder: "B_no_bg",
      file: "틴트.png",
      codePrefix: "BM",
      brandName: "루나화이트",
      categorySlug: "beauty",
      price: 16000,
      isSample: true,
      samplePrice: 500,
      isPick: true,
      detailDescription: "가볍게 밀착되는 벨벳 텍스처",
    },
    {
      name: "루나화이트 벨벳 틴트 로즈",
      folder: "B_no_bg",
      file: "틴트2.png",
      codePrefix: "BM",
      brandName: "루나화이트",
      categorySlug: "beauty",
      price: 16000,
      isSample: true,
      samplePrice: 500,
      isPick: false,
      detailDescription: "말린장미 MLBB 컬러",
    },
    {
      name: "루나화이트 글로우 틴트 코랄",
      folder: "B_no_bg",
      file: "틴트 3.png",
      codePrefix: "BM",
      brandName: "루나화이트",
      categorySlug: "beauty",
      price: 16000,
      isSample: true,
      samplePrice: 500,
      isPick: true,
      detailDescription: "유리알 광택 수분 틴트",
    },
    {
      name: "루나화이트 무스 틴트 브릭",
      folder: "B_no_bg",
      file: "틴트4.png",
      codePrefix: "BM",
      brandName: "루나화이트",
      categorySlug: "beauty",
      price: 17000,
      isSample: true,
      samplePrice: 550,
      isPick: false,
      detailDescription: "보송 지속 무스 타입",
    },
    {
      name: "루나화이트 소프트 틴트 누드",
      folder: "B_no_bg",
      file: "틴트6.png",
      codePrefix: "BM",
      brandName: "루나화이트",
      categorySlug: "beauty",
      price: 17000,
      isSample: true,
      samplePrice: 550,
      isPick: false,
      detailDescription: "은은한 MLBB 누드",
    },
    {
      name: "오가닉테라 글로우 쿠션 15g",
      folder: "B_no_bg",
      file: "쿠션1.png",
      codePrefix: "BM",
      brandName: "오가닉테라",
      categorySlug: "beauty",
      price: 32000,
      isSample: false,
      samplePrice: 1100,
      isPick: true,
      detailDescription: "촉촉 광채 쿠션",
    },
    {
      name: "오가닉테라 벨벳 쿠션 15g",
      folder: "B_no_bg",
      file: "쿠션2.png",
      codePrefix: "BM",
      brandName: "오가닉테라",
      categorySlug: "beauty",
      price: 32000,
      isSample: false,
      samplePrice: 1100,
      isPick: false,
      detailDescription: "보송 커버 쿠션",
    },
    {
      name: "블루허브 하이커버 컨실러 6ml",
      folder: "B_no_bg",
      file: "컨실러.png",
      codePrefix: "BM",
      brandName: "블루허브",
      categorySlug: "beauty",
      price: 18000,
      isSample: true,
      samplePrice: 600,
      isPick: false,
      detailDescription: "한 번에 잡티 커버",
    },
    {
      name: "네이처소울 아이섀도 팔레트 9색",
      folder: "B_no_bg",
      file: "아이셰도우.png",
      codePrefix: "BM",
      brandName: "네이처소울",
      categorySlug: "beauty",
      price: 42000,
      isSample: false,
      samplePrice: 1400,
      isPick: false,
      detailDescription: "데일리부터 포인트까지",
    },
    {
      name: "네이처소울 아이섀도 듀오",
      folder: "B_no_bg",
      file: "아이셰도우2.png",
      codePrefix: "BM",
      brandName: "네이처소울",
      categorySlug: "beauty",
      price: 19000,
      isSample: true,
      samplePrice: 650,
      isPick: true,
      detailDescription: "꿀조합 듀오 섀도",
    },
    {
      name: "퓨어딥 내추럴 블러셔 1",
      folder: "B_no_bg",
      file: "블려서1.png",
      codePrefix: "BM",
      brandName: "퓨어딥",
      categorySlug: "beauty",
      price: 20000,
      isSample: true,
      samplePrice: 700,
      isPick: false,
      detailDescription: "은은한 치크 컬러",
    },
    {
      name: "퓨어딥 소프트 블러셔 2",
      folder: "B_no_bg",
      file: "블려셔2.png",
      codePrefix: "BM",
      brandName: "퓨어딥",
      categorySlug: "beauty",
      price: 20000,
      isSample: true,
      samplePrice: 700,
      isPick: true,
      detailDescription: "자연스러운 혈색 표현",
    },
    {
      name: "퓨어딥 글로우 블러셔 3",
      folder: "B_no_bg",
      file: "블려셔3.png",
      codePrefix: "BM",
      brandName: "퓨어딥",
      categorySlug: "beauty",
      price: 21000,
      isSample: true,
      samplePrice: 750,
      isPick: false,
      detailDescription: "잔잔한 펄 하이라이트",
    },
    {
      name: "피토베라 프리미엄 속눈썹",
      folder: "B_no_bg",
      file: "속눈썹.png",
      codePrefix: "BM",
      brandName: "피토베라",
      categorySlug: "beauty",
      price: 12000,
      isSample: false,
      samplePrice: 350,
      isPick: true,
      detailDescription: "자연스러운 컬과 길이",
    },

    // 🎨 Beauty - Hair/Body (BH)
    {
      name: "루나화이트 헤어 트리트먼트 200ml",
      folder: "B_no_bg",
      file: "헤어 트리트먼트.png",
      codePrefix: "BH",
      brandName: "루나화이트",
      categorySlug: "beauty",
      price: 25000,
      isSample: false,
      samplePrice: 850,
      isPick: true,
      detailDescription: "손상모 집중 케어",
    },
    {
      name: "에버블룸 헤어 미스트 100ml",
      folder: "B_no_bg",
      file: "헤어미스트.png",
      codePrefix: "BH",
      brandName: "에버블룸",
      categorySlug: "beauty",
      price: 14000,
      isSample: true,
      samplePrice: 500,
      isPick: false,
      detailDescription: "가볍고 산뜻한 헤어 퍼퓸 미스트",
    },
    {
      name: "아쿠아하이드 시어 핸드크림 50ml",
      folder: "B_no_bg",
      file: "핸드크림.png",
      codePrefix: "BH",
      brandName: "아쿠아하이드",
      categorySlug: "beauty",
      price: 12000,
      isSample: true,
      samplePrice: 400,
      isPick: true,
      detailDescription: "끈적임 없는 고보습 핸드크림",
    },
    {
      name: "오가닉테라 오 드 퍼퓸 50ml",
      folder: "B_no_bg",
      file: "향수.png",
      codePrefix: "BH",
      brandName: "오가닉테라",
      categorySlug: "beauty",
      price: 42000,
      isSample: false,
      samplePrice: 1400,
      isPick: false,
      detailDescription: "시그니처 플로럴 머스크",
    },
    {
      name: "오가닉테라 오 드 퍼퓸 50ml 02",
      folder: "B_no_bg",
      file: "향수2.png",
      codePrefix: "BH",
      brandName: "오가닉테라",
      categorySlug: "beauty",
      price: 42000,
      isSample: false,
      samplePrice: 1400,
      isPick: true,
      detailDescription: "프루티 우디 노트",
    },

    // 🎨 Beauty - Tools (BT)
    {
      name: "로지스킨 프로 메이크업 브러시",
      folder: "B_no_bg",
      file: "브러시.png",
      codePrefix: "BT",
      brandName: "로지스킨",
      categorySlug: "beauty",
      price: 18000,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "정교한 커팅의 전문가용 브러시",
    },
    {
      name: "로지스킨 브러시 클렌저 100ml",
      folder: "B_no_bg",
      file: "브러시 세척액.png",
      codePrefix: "BT",
      brandName: "로지스킨",
      categorySlug: "beauty",
      price: 10000,
      isSample: true,
      samplePrice: 350,
      isPick: false,
      detailDescription: "잔여물까지 말끔 세정",
    },

    // 🍎 Food - Meal (FM)
    {
      name: "헬시밀 한끼 파우더 드링크",
      folder: "F_no_bg",
      file: "한끼 파우더 드링크.png",
      codePrefix: "FM",
      brandName: "헬시밀",
      categorySlug: "food",
      price: 19500,
      isSample: true,
      samplePrice: 650,
      isPick: true,
      detailDescription: "물만 넣어 간편하게 한 끼",
    },
    {
      name: "헬시밀 저속노화 밥 3종",
      folder: "F_no_bg",
      file: "저속노화밥 3종.png",
      codePrefix: "FM",
      brandName: "헬시밀",
      categorySlug: "food",
      price: 18900,
      isSample: false,
      samplePrice: 700,
      isPick: false,
      detailDescription: "균형 잡힌 탄수화물 설계",
    },
    {
      name: "오가닉키친 저탄수 밥 4종",
      folder: "F_no_bg",
      file: "저탄수 밥 4종.png",
      codePrefix: "FM",
      brandName: "오가닉키친",
      categorySlug: "food",
      price: 19800,
      isSample: true,
      samplePrice: 700,
      isPick: true,
      detailDescription: "맛있게 즐기는 로우카브",
    },
    {
      name: "바이탈웰 만두 10개입",
      folder: "F_no_bg",
      file: "만두.png",
      codePrefix: "FM",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 8900,
      isSample: false,
      samplePrice: 300,
      isPick: false,
      detailDescription: "속이 꽉 찬 담백만두",
    },
    {
      name: "네이처푸드 닭가슴살 200g",
      folder: "F_no_bg",
      file: "닭가슴살.png",
      codePrefix: "FM",
      brandName: "네이처푸드",
      categorySlug: "food",
      price: 4900,
      isSample: true,
      samplePrice: 200,
      isPick: false,
      detailDescription: "부드럽고 촉촉한 단백질",
    },
    {
      name: "오가닉키친 단호박 이유식",
      folder: "F_no_bg",
      file: "단호박 이유식.png",
      codePrefix: "FM",
      brandName: "오가닉키친",
      categorySlug: "food",
      price: 7900,
      isSample: false,
      samplePrice: 250,
      isPick: true,
      detailDescription: "자연 재료 그대로",
    },
    {
      name: "퓨어라이프 애사비",
      folder: "F_no_bg",
      file: "애사비.png",
      codePrefix: "FM",
      brandName: "퓨어라이프",
      categorySlug: "food",
      price: 3500,
      isSample: false,
      samplePrice: 150,
      isPick: false,
      detailDescription: "상큼한 기분전환 음료",
    },

    // 🍎 Food - Healthcare (FH) / Care (FC)
    {
      name: "바이탈웰 장유산균 60캡슐",
      folder: "F_no_bg",
      file: "장유산균.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 35000,
      isSample: true,
      samplePrice: 1200,
      isPick: true,
      detailDescription: "장 건강 특화 포뮬러",
    },
    {
      name: "바이탈웰 피부 영양제",
      folder: "F_no_bg",
      file: "피부영양제.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 29000,
      isSample: true,
      samplePrice: 950,
      isPick: false,
      detailDescription: "콜라겐·비오틴 컴플렉스",
    },
    {
      name: "바이탈웰 비타민C 1000",
      folder: "F_no_bg",
      file: "비타민.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 18000,
      isSample: true,
      samplePrice: 600,
      isPick: true,
      detailDescription: "면역·항산화 필수",
    },
    {
      name: "바이탈웰 비타민C 1000 (레몬)",
      folder: "F_no_bg",
      file: "비타민 2.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 18500,
      isSample: true,
      samplePrice: 650,
      isPick: false,
      detailDescription: "상큼한 레모네이드 타입",
    },
    {
      name: "바이탈웰 종합 영양제 3종 세트",
      folder: "F_no_bg",
      file: "영양제 3종'.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 42000,
      isSample: false,
      samplePrice: 1400,
      isPick: true,
      detailDescription: "멀티비타민·미네랄 구성",
    },
    {
      name: "바이탈웰 영양제 플러스",
      folder: "F_no_bg",
      file: "영양제ㅐ.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 26000,
      isSample: true,
      samplePrice: 900,
      isPick: false,
      detailDescription: "필수 영양 보강",
    },
    {
      name: "바이탈웰 영양제 3",
      folder: "F_no_bg",
      file: "영양제3.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 24000,
      isSample: true,
      samplePrice: 850,
      isPick: false,
      detailDescription: "데일리 서플리먼트",
    },
    {
      name: "바이탈웰 영양제 4",
      folder: "F_no_bg",
      file: "영양제4.png",
      codePrefix: "FH",
      brandName: "바이탈웰",
      categorySlug: "food",
      price: 26000,
      isSample: true,
      samplePrice: 900,
      isPick: true,
      detailDescription: "업그레이드 포뮬러",
    },
    {
      name: "퓨어라이프 진액 500ml",
      folder: "F_no_bg",
      file: "진액.png",
      codePrefix: "FC",
      brandName: "퓨어라이프",
      categorySlug: "food",
      price: 32000,
      isSample: true,
      samplePrice: 1100,
      isPick: false,
      detailDescription: "농축 과실 진액",
    },
    {
      name: "칼로리 컷 가르시니아",
      folder: "F_no_bg",
      file: "칼로리 컷 .png",
      codePrefix: "FH",
      brandName: "헬시밀",
      categorySlug: "food",
      price: 23000,
      isSample: true,
      samplePrice: 800,
      isPick: true,
      detailDescription: "체지방 관리 서포트",
    },
    {
      name: "위 건강 집중 케어",
      folder: "F_no_bg",
      file: "위 건강식품.png",
      codePrefix: "FH",
      brandName: "헬시밀",
      categorySlug: "food",
      price: 27000,
      isSample: true,
      samplePrice: 900,
      isPick: false,
      detailDescription: "위 점막 보호 포뮬러",
    },

    // 🏠 Living - Kitchen (LK)
    {
      name: "데일리라이프 캡슐 세제",
      folder: "L_no_bg",
      file: "캡슐세제.png",
      codePrefix: "LK",
      brandName: "데일리라이프",
      categorySlug: "living",
      price: 15900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "간편 투입 초고농축 세제",
    },
    {
      name: "데일리라이프 캡슐 세제 프레시",
      folder: "L_no_bg",
      file: "캡슐세제3.png",
      codePrefix: "LK",
      brandName: "데일리라이프",
      categorySlug: "living",
      price: 16900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "상쾌한 향 지속",
    },
    {
      name: "데일리라이프 주방 수세미 3개입",
      folder: "L_no_bg",
      file: "수세미.png",
      codePrefix: "LK",
      brandName: "데일리라이프",
      categorySlug: "living",
      price: 4900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "긁힘 없이 강력 세척",
    },
    {
      name: "데일리라이프 일회용 세제 팩",
      folder: "L_no_bg",
      file: "일회용 세제.png",
      codePrefix: "LK",
      brandName: "데일리라이프",
      categorySlug: "living",
      price: 6900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "휴대·보관이 쉬운 파우치형",
    },

    // 🏠 Living - Daily (LD)
    {
      name: "홈스위트 가글 오리지널",
      folder: "L_no_bg",
      file: "가글.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 4900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "상쾌함이 오래가는 구강청결제",
    },
    {
      name: "홈스위트 가글 라이트",
      folder: "L_no_bg",
      file: "가글2.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 4900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "순한 타입 저자극",
    },
    {
      name: "홈스위트 구강 케어 세트",
      folder: "L_no_bg",
      file: "구강케어.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 12900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "칫솔·치약·가글 3종",
    },
    {
      name: "홈스위트 칫솔 4개입",
      folder: "L_no_bg",
      file: "칫솔.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 3900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "미세모로 부드럽게",
    },
    {
      name: "홈스위트 입욕제 클래식",
      folder: "L_no_bg",
      file: "입욕제\\.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 8900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "집에서 즐기는 스파",
    },
    {
      name: "홈스위트 어린이 치약·칫솔",
      folder: "L_no_bg",
      file: "어린이 치약핏솔.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 6900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "키즈용 저불소 세트",
    },
    {
      name: "홈스위트 샴푸 500ml",
      folder: "L_no_bg",
      file: "샴푸.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 9900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "두피 자극 낮춘 데일리 샴푸",
    },
    {
      name: "홈스위트 바디워시 500ml",
      folder: "L_no_bg",
      file: "바디워시.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 10900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "산뜻 워시 포뮬러",
    },
    {
      name: "홈스위트 기저귀 L",
      folder: "L_no_bg",
      file: "기저귀3.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 23000,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "흡수력 강화, 보송 착용감",
    },
    {
      name: "홈스위트 기저귀 XL",
      folder: "L_no_bg",
      file: "기저귀4.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 25000,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "활동량 많은 아이를 위해",
    },
    {
      name: "홈스위트 귀저기 베이직",
      folder: "L_no_bg",
      file: "귀저기.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 19900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "민감 피부 전용",
    },
    {
      name: "홈스위트 귀저기 소프트",
      folder: "L_no_bg",
      file: "귀저기2.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 20900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "부드러운 촉감",
    },
    {
      name: "홈스위트 우유 1L",
      folder: "L_no_bg",
      file: "우유.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 2900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "살균 우유",
    },
    {
      name: "홈스위트 펫 등록증 케이스",
      folder: "L_no_bg",
      file: "펫 등록증.png",
      codePrefix: "LD",
      brandName: "홈스위트",
      categorySlug: "living",
      price: 5900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "반려동물 등록증 보호 케이스",
    },

    // 🐕 Pet - Dog (PD)
    {
      name: "펫프렌즈 강아지 사료 2kg",
      folder: "P_no_bg",
      file: "강이지 사료.png",
      codePrefix: "PD",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 35000,
      isSample: true,
      samplePrice: 1200,
      isPick: true,
      detailDescription: "전연령용 맞춤 영양",
    },
    {
      name: "펫프렌즈 강아지 사료 2 2kg",
      folder: "P_no_bg",
      file: "강아지 사료 2.png",
      codePrefix: "PD",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 34000,
      isSample: true,
      samplePrice: 1100,
      isPick: false,
      detailDescription: "소형견 최적화",
    },
    {
      name: "펫프렌즈 강아지 사료 5 2kg",
      folder: "P_no_bg",
      file: "강아지 사료5.png",
      codePrefix: "PD",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 36000,
      isSample: true,
      samplePrice: 1250,
      isPick: false,
      detailDescription: "활동견 에너지 케어",
    },
    {
      name: "해피펫 강아지 간식",
      folder: "P_no_bg",
      file: "강아지 간식.png",
      codePrefix: "PD",
      brandName: "해피펫",
      categorySlug: "pet",
      price: 8900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "훈련 보상 간식",
    },
    {
      name: "해피펫 강아지 간식 4",
      folder: "P_no_bg",
      file: "강아지 간식4.png",
      codePrefix: "PD",
      brandName: "해피펫",
      categorySlug: "pet",
      price: 9900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "오븐 베이크드",
    },
    {
      name: "해피펫 강아지 화식 간식",
      folder: "P_no_bg",
      file: "강아지 화식 간식.png",
      codePrefix: "PD",
      brandName: "해피펫",
      categorySlug: "pet",
      price: 12900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "휴먼그레이드 재료",
    },
    {
      name: "펫케어 강아지 육포",
      folder: "P_no_bg",
      file: "강야지 육포.png",
      codePrefix: "PD",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 10900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "풍미 가득 천연 육포",
    },
    {
      name: "펫프렌즈 강아지 영양제",
      folder: "P_no_bg",
      file: "강아지 영양제.png",
      codePrefix: "PD",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 28000,
      isSample: true,
      samplePrice: 950,
      isPick: false,
      detailDescription: "관절·피부 종합 케어",
    },
    {
      name: "펫프렌즈 강아지 영양제 3",
      folder: "P_no_bg",
      file: "강아지 영양제3.png",
      codePrefix: "PD",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 29000,
      isSample: true,
      samplePrice: 1000,
      isPick: true,
      detailDescription: "유산균 플러스",
    },
    {
      name: "펫프렌즈 강아지 영양제 4",
      folder: "P_no_bg",
      file: "강아지 영양제 4.png",
      codePrefix: "PD",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 31000,
      isSample: true,
      samplePrice: 1050,
      isPick: false,
      detailDescription: "멀티비타민 포뮬러",
    },
    {
      name: "펫케어 펫 사료 1.5kg",
      folder: "P_no_bg",
      file: "펫 사료.png",
      codePrefix: "PD",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 28000,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "종합 사료",
    },
    {
      name: "펫케어 펫 간식 믹스",
      folder: "P_no_bg",
      file: "펫 간식.png",
      codePrefix: "PD",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 9900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "다양한 텍스처의 간식",
    },
    {
      name: "펫케어 펫 영양제",
      folder: "P_no_bg",
      file: "펫 영양제.png",
      codePrefix: "PD",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 26000,
      isSample: true,
      samplePrice: 900,
      isPick: false,
      detailDescription: "면역·활력 케어",
    },
    {
      name: "펫케어 펫 목걸이",
      folder: "P_no_bg",
      file: "펫 목걸이.png",
      codePrefix: "PD",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 12000,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "네임택 포함",
    },

    // 🐈 Pet - Cat (PC)
    {
      name: "펫프렌즈 고양이 사료 2kg",
      folder: "P_no_bg",
      file: "고양이 사료.png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 32000,
      isSample: true,
      samplePrice: 1100,
      isPick: true,
      detailDescription: "전연령 고양이 맞춤",
    },
    {
      name: "펫프렌즈 고양이 사료 3 2kg",
      folder: "P_no_bg",
      file: "고양이 사료3.png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 33000,
      isSample: true,
      samplePrice: 1150,
      isPick: false,
      detailDescription: "헤어볼 케어",
    },
    {
      name: "펫프렌즈 고양이 사료 4 2kg",
      folder: "P_no_bg",
      file: "고양이 사료4.png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 33000,
      isSample: true,
      samplePrice: 1150,
      isPick: true,
      detailDescription: "실내묘 전용",
    },
    {
      name: "펫프렌즈 고양이 사료 5 2kg",
      folder: "P_no_bg",
      file: "고양이사료5.png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 34000,
      isSample: true,
      samplePrice: 1200,
      isPick: false,
      detailDescription: "키튼 전용",
    },
    {
      name: "해피펫 츄르 6개입",
      folder: "P_no_bg",
      file: "츄르.png",
      codePrefix: "PC",
      brandName: "해피펫",
      categorySlug: "pet",
      price: 6900,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "부드러운 식감의 참치맛",
    },
    {
      name: "해피펫 고양이 간식",
      folder: "P_no_bg",
      file: "고양이 간식.png",
      codePrefix: "PC",
      brandName: "해피펫",
      categorySlug: "pet",
      price: 7900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "동결건조 100%",
    },
    {
      name: "해피펫 고양이 간식 2",
      folder: "P_no_bg",
      file: "고양이 간식2.png",
      codePrefix: "PC",
      brandName: "해피펫",
      categorySlug: "pet",
      price: 8500,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "연어 큐브",
    },
    {
      name: "펫프렌즈 고양이 영양제",
      folder: "P_no_bg",
      file: "고양이 영양제.png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 27000,
      isSample: true,
      samplePrice: 900,
      isPick: false,
      detailDescription: "피모·면역 케어",
    },
    {
      name: "펫프렌즈 고양이 영양제 3",
      folder: "P_no_bg",
      file: "고양이 영양제3.png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 29000,
      isSample: true,
      samplePrice: 1000,
      isPick: true,
      detailDescription: "유산균 함유",
    },
    {
      name: "펫프렌즈 캣그라스",
      folder: "P_no_bg",
      file: "고양이 캣그라스 .png",
      codePrefix: "PC",
      brandName: "펫프렌즈",
      categorySlug: "pet",
      price: 5900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "자연 재배 캣그라스",
    },

    // 🧸 Pet - Toy (PT) 및 기타 소동물 먹이 매핑
    {
      name: "펫케어 펫 장난감 세트",
      folder: "P_no_bg",
      file: "펫 장난감.png",
      codePrefix: "PT",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 15000,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "튼튼한 기본 장난감 구성",
    },
    {
      name: "펫케어 바나나 숨숨집",
      folder: "P_no_bg",
      file: "바나나 숨숨집.png",
      codePrefix: "PT",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 22000,
      isSample: false,
      samplePrice: null,
      isPick: true,
      detailDescription: "말랑 쿠션 하우스",
    },
    {
      name: "펫케어 해바라기 씨(햄스터)",
      folder: "P_no_bg",
      file: "해바라기 씨(햄스터).png",
      codePrefix: "PT",
      brandName: "펫케어",
      categorySlug: "pet",
      price: 4900,
      isSample: false,
      samplePrice: null,
      isPick: false,
      detailDescription: "소동물 전용 간식",
    },
  ];

  // 코드 프리픽스별 번호 부여 (001부터 증가)
  const counters = new Map<string, number>();
  function nextCode(prefix: string): string {
    const current = counters.get(prefix) ?? 0;
    const next = current + 1;
    counters.set(prefix, next);
    return `${prefix}${String(next).padStart(3, "0")}`;
  }

  // 샘플 처리 정책
  const FORCE_ALL_SAMPLE = true; // 모든 상품을 샘플로 강제
  const SAMPLE_LABEL_IN_NAME = false; // true로 바꾸면 제품명 앞에 "샘플 " 프리픽스 부여
  const SAMPLE_NAME_PREFIX = "샘플 ";

  const productsToCreate = products.map((p) => ({
    name:
      (SAMPLE_LABEL_IN_NAME || p.isSample) && FORCE_ALL_SAMPLE
        ? `${SAMPLE_NAME_PREFIX}${p.name}`
        : SAMPLE_LABEL_IN_NAME && p.isSample
        ? `${SAMPLE_NAME_PREFIX}${p.name}`
        : p.name,
    productCode: nextCode(p.codePrefix),
    brandId: brandMap.get(p.brandName)!,
    price: p.price,
    stockQuantity: p.stockQuantity ?? 100,
    thumbnailImageUrl: toBlobUrl(p.folder, p.file),
    detailDescription: p.detailDescription ?? "",
    isSample: FORCE_ALL_SAMPLE ? true : p.isSample,
    samplePrice:
      FORCE_ALL_SAMPLE || p.isSample
        ? p.samplePrice ?? Math.max(200, Math.round(p.price * 0.03))
        : p.samplePrice,
    categoryId: categoryMap.get(p.categorySlug)!,
    isPick: p.isPick ?? false,
  }));

  await prisma.product.createMany({ data: productsToCreate });

  // 쿠폰 5개 생성
  console.log("🎫 쿠폰 생성 중...");
  await prisma.coupon.createMany({
    data: [
      {
        code: "WELCOME10",
        name: "신규 회원 10% 할인",
        discountType: "PERCENTAGE",
        discountValue: 10,
        minOrderAmount: 30000,
        validFrom: new Date("2024-08-01"),
        validUntil: new Date("2025-12-31"),
        isActive: true,
        usageLimit: 100,
        issuedBySamplePurchase: false,
      },
      {
        code: "SAMPLE5000",
        name: "샘플 구매 후 5000원 할인",
        discountType: "FIXED",
        discountValue: 5000,
        minOrderAmount: 20000,
        validFrom: new Date("2024-08-01"),
        validUntil: new Date("2025-12-31"),
        isActive: true,
        usageLimit: 50,
        issuedBySamplePurchase: true,
      },
      {
        code: "BEAUTY15",
        name: "뷰티 제품 15% 할인",
        discountType: "PERCENTAGE",
        discountValue: 15,
        minOrderAmount: 50000,
        validFrom: new Date("2024-08-01"),
        validUntil: new Date("2025-10-31"),
        isActive: true,
        usageLimit: 200,
        issuedBySamplePurchase: false,
      },
      {
        code: "FREE3000",
        name: "3000원 즉시 할인",
        discountType: "FIXED",
        discountValue: 3000,
        minOrderAmount: 15000,
        validFrom: new Date("2024-08-01"),
        validUntil: new Date("2025-09-30"),
        isActive: true,
        usageLimit: 500,
        issuedBySamplePurchase: false,
      },
      {
        code: "VIP20",
        name: "VIP 회원 20% 할인",
        discountType: "PERCENTAGE",
        discountValue: 20,
        minOrderAmount: 100000,
        validFrom: new Date("2024-08-01"),
        validUntil: new Date("2025-01-31"),
        isActive: true,
        usageLimit: 30,
        issuedBySamplePurchase: false,
      },
    ],
  });

  const [brandCount, productCount, couponCount] = await Promise.all([
    prisma.brand.count(),
    prisma.product.count(),
    prisma.coupon.count(),
  ]);

  console.log("✅ 시딩 완료!");
  console.log(
    `👥 유저 5명, 🏷️ 브랜드 ${brandCount}개, 🛍️ 제품 ${productCount}개, 🎫 쿠폰 ${couponCount}개 생성`
  );
}

main()
  .then(() => {
    console.log("🌱 데이터베이스 시딩이 성공적으로 완료되었습니다!");
  })
  .catch((e) => {
    console.error("❌ 시딩 에러:", e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
